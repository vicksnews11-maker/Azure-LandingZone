trigger: none
pool:
  name: Myagent

stages:
# ------------------------- #
# Stage 1 : Build
# ------------------------- #
- stage: Build
  displayName: "Build Stage"
  jobs:
  - job: RunTests
    displayName: "Run Test Job"
    steps:
    - script: echo "Running tests..."
      displayName: "Test Step"

# ------------------------- #
# Stage 2 : Manual Approval (self)
# ------------------------- #
- stage: ManualApproval
  displayName: "Manual Approval Stage"
  dependsOn: Build

  jobs:
  - job: ApproveJob
    displayName: "Agentless Manual Approval"
    pool: server   # VERY IMPORTANT â€“ must be 'server'

    steps:
    - task: ManualValidation@1
      displayName: "Approve to Continue"
      inputs:
        notifyUsers: 'user1@shaiksk2025outlook.onmicrosoft.com'
        approvers: 'vicksnews11@gmail.com'
        instructions: 'Click Approve to continue.'
