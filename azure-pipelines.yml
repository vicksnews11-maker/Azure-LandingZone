trigger: none

stages:
# ------------------------- #
# Stage 1 : Build using your agent
# ------------------------- #
- stage: Build
  displayName: "Build Stage"
  jobs:
  - job: RunTests
    displayName: "Run Test Job"
    pool:
      name: Myagent   # <-- your self-hosted agent
    steps:
    - script: echo "Running tests..."
      displayName: "Test Step"

# ------------------------- #
# Stage 2 : Manual Approval (Agentless)
# ------------------------- #
- stage: Approval
  displayName: "Manual Approval Stage"
  dependsOn: Build

  jobs:
  - job: ManualApproval
    displayName: "Agentless Manual Approval"
    pool: server     # <-- MUST be server or approval won't work
    steps:
    - task: ManualValidation@1
      inputs:
        notifyUsers: 'user1@shaiksk2025outlook.onmicrosoft.com'
        approvers: 'vicks'
